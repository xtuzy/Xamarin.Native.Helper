using static Android.Manifest;
using PM = Android.Content.PM;

namespace Yang.Maui.Helper.Applications
{
    /// <summary>
    /// ??????????????????????????????
    /// </summary>
    public static class Permission
    {
        #region ??????
        /// <summary>
        /// ????????????
        /// </summary>
        private static readonly string[] PERMISSIONS_STORAGE =
        {
            global::Android.Manifest.Permission.ReadExternalStorage,
            global::Android.Manifest.Permission.WriteExternalStorage,
        };

        /// <summary>
        /// Defines the REQUEST_EXTERNAL_STORAGE
        /// </summary>
        private static readonly int REQUEST_EXTERNAL_STORAGE = 1;

        /// <summary>
        /// ????????????????????????????????????????????????
        /// ???????????????????????????????????????????????????????????????
        /// </summary>
        /// <param name="activity"></param>
        public static void RequestExternalStoragePermission(Activity activity)
        {
            // ?????????????????????????????????
            if (AndroidX.Core.App.ActivityCompat.CheckSelfPermission(activity, global::Android.Manifest.Permission.WriteExternalStorage) != PM.Permission.Granted)
            {
                // ???????????????????????????????????????
                AndroidX.Core.App.ActivityCompat.RequestPermissions(
                    activity,
                    PERMISSIONS_STORAGE,
                    REQUEST_EXTERNAL_STORAGE
                );
            }
        }

        #endregion
    }
}